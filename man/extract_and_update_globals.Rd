% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/extract_global_var.r
\name{extract_and_update_globals}
\alias{extract_and_update_globals}
\title{Extract and Update Global Variables from R CMD Check Output}
\usage{
extract_and_update_globals(check_output_string, package_dir = ".")
}
\arguments{
\item{check_output_string}{Character string containing R CMD check output,
typically copy-pasted from the console or log file.}

\item{package_dir}{Character string specifying the path to the package directory.
Defaults to current directory (".").}
}
\value{
A list containing:
\item{new_variables}{Character vector of newly found global variables}
\item{all_variables}{Character vector of all global variables (existing + new)}
\item{file_path}{Character string path to the check_global.R file}
}
\description{
This function parses R CMD check output to identify global variable warnings
and automatically updates the package's check_global.R file with the appropriate
utils::globalVariables() declarations. It reads existing global variables
and merges them with newly found ones.
}
\details{
The function searches for two types of global variable warnings in the check output:
\enumerate{
\item Individual warnings: "no visible binding for global variable 'variable_name'"
\item Summary section: "Undefined global functions or variables:"
}

The function automatically:
\itemize{
\item Creates the R/ directory if it doesn't exist
\item Reads existing global variables from check_global.R if present
\item Merges new variables with existing ones (removing duplicates)
\item Writes the updated utils::globalVariables() declaration
\item Filters out function names and keeps only variable-like identifiers
}
}
\examples{
\dontrun{
# Basic usage with R CMD check output
check_output <- "myfunction: no visible binding for global variable 'x'
   Undefined global functions or variables:
     x y_var weighted_value"

extract_and_update_globals(check_output)

# Specify different package directory
extract_and_update_globals(check_output, package_dir = "path/to/package")
}

}
\seealso{
\code{\link[utils]{globalVariables}} for more information about
suppressing global variable warnings.
}
